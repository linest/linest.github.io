<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>系统设计 | Blog of Linest</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="https://github.com/donnemartin/system-design-primer 明确业务功能，设计API 明确数据特点，设计表结构，决定存储设施 明确量级，估算QPS，设计分布式 高可用，避免单点  服务副本，不能无服务 数据副本，不能丢数据 监控  高性能  缓存  可扩展性  开放API  电影售票服务  业务功能  电影院选取  城市筛选 电影筛选   电影院场次选取">
<meta property="og:type" content="website">
<meta property="og:title" content="系统设计">
<meta property="og:url" content="http://linest.github.io/tmp/system-design.html">
<meta property="og:site_name" content="Blog of Linest">
<meta property="og:description" content="https://github.com/donnemartin/system-design-primer 明确业务功能，设计API 明确数据特点，设计表结构，决定存储设施 明确量级，估算QPS，设计分布式 高可用，避免单点  服务副本，不能无服务 数据副本，不能丢数据 监控  高性能  缓存  可扩展性  开放API  电影售票服务  业务功能  电影院选取  城市筛选 电影筛选   电影院场次选取">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-04-10T05:12:04.204Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="系统设计">
<meta name="twitter:description" content="https://github.com/donnemartin/system-design-primer 明确业务功能，设计API 明确数据特点，设计表结构，决定存储设施 明确量级，估算QPS，设计分布式 高可用，避免单点  服务副本，不能无服务 数据副本，不能丢数据 监控  高性能  缓存  可扩展性  开放API  电影售票服务  业务功能  电影院选取  城市筛选 电影筛选   电影院场次选取">
  
    <link rel="alternative" href="/atom.xml" title="Blog of Linest" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/fonts/octicons/octicons.css">
  <link rel="stylesheet" href="/css/fonts/font-awesome-4.6.3/css/font-awesome.min.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  
</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/assets/avatar/pika.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Linest</a></h1>
		</hgroup>

		
		<p class="header-subtitle">试验田|小黑屋|百宝箱|里程碑</p>
		

		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/linest" title="github">github</a>
					        
								<a class="mail" target="_blank" href="mailto:xlinest@gmail.com" title="mail">mail</a>
					        
						</div>
					</nav>
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/doodle">涂鸦</a></li>
				        
							<li><a href="/live2d">云撸猫</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/tagcloud">标签&amp;分类</a></li>
				        
						</ul>
					</nav>	
				</section>
				
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">勤奋的懒惰者
爱听故事的人~
Zjuer
</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Linest</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/assets/avatar/pika.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Linest</h1>
			</hgroup>
			
			<p class="header-subtitle">试验田|小黑屋|百宝箱|里程碑</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/doodle">涂鸦</a></li>
		        
					<li><a href="/live2d">云撸猫</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tagcloud">标签&amp;分类</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/linest" title="github">github</a>
			        
						<a class="mail" target="_blank" href="mailto:xlinest@gmail.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="page-undefined" class="article article-type-page" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/tmp/system-design.html" class="article-date">
  	<time datetime="2020-04-10T05:12:04.204Z" itemprop="datePublished">2020-04-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      系统设计
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/donnemartin/system-design-primer" target="_blank" rel="noopener">https://github.com/donnemartin/system-design-primer</a></p>
<p>明确业务功能，设计API<br>
明确数据特点，设计表结构，决定存储设施<br>
明确量级，估算QPS，设计分布式</p>
<p>高可用，避免单点</p>
<ul>
<li>服务副本，不能无服务</li>
<li>数据副本，不能丢数据</li>
<li>监控</li>
</ul>
<p>高性能</p>
<ul>
<li>缓存</li>
</ul>
<p>可扩展性</p>
<ul>
<li>开放API</li>
</ul>
<h1 id="电影售票服务">电影售票服务</h1>
<hr>
<p>业务功能</p>
<ul>
<li>电影院选取
<ul>
<li>城市筛选</li>
<li>电影筛选</li>
</ul>
</li>
<li>电影院场次选取</li>
<li>座位选取
<ul>
<li>可订座位情况</li>
<li>锁定,候补队列</li>
</ul>
</li>
</ul>
<p>表结构</p>
<ul>
<li>电影表：电影id, 名称，国别，演员…</li>
<li>影院表：影院id, 名称，位置，经度，纬度</li>
<li>场次表：场次id, 影院id，电影id，放映厅，时间</li>
<li>座位预定表：场次id，座位id, 状态，预定用户id</li>
</ul>
<p>静态缓存：上映影片变化但是数量少，影院比较固定数量少，缓存<br>
数据分片：根据场次分，同场次在一起<br>
历史数据归档：历史数据很少访问，分库/partition</p>
<p>严格事务<br>
秒杀场景<br>
位图优化，座次表省略，换成位图?</p>
<h1 id="朋友圈">朋友圈</h1>
<hr>
<p>读多写少<br>
不可变，无法修改</p>
<p>业务功能：</p>
<ul>
<li>发表(文字，图片，分组)</li>
<li>浏览(个人/他人)</li>
<li>评论</li>
<li>点赞</li>
<li>事件通知</li>
</ul>
<p>数据特点：</p>
<ul>
<li>图片最多9张</li>
<li>内容不可修改</li>
<li>读多写少</li>
<li>好友数量上限5000</li>
</ul>
<p>表结构：<br>
feed表：文字内容，图片url，可见范围<br>
图片表: 图片数据<br>
互动表：评论，点赞<br>
消息流表： 可见的好友feed</p>
<p>数据量：<br>
每日发表量10亿，浏览量100亿</p>
<p>架构：<br>
单表无法存储，水平扩展<br>
读多写少，采用写扩散模型，每发布一条，后端异步插入到每个好友消息流<br>
写开销大，但是读取简单，每个用户只需要读取自己的消息流表，无需遍历每个好友<br>
增量拉取，客户端本地有缓存</p>
<h1 id="图片分享-微博">图片分享/微博</h1>
<hr>
<p>业务功能</p>
<ul>
<li>上传/下载/查看图片</li>
<li>搜索</li>
<li>关注</li>
<li>消息流生成</li>
</ul>
<p>表结构</p>
<ul>
<li>图片元数据表：图片Id(PK), 存储路径，图片经纬度，用户Id，用户经纬度，创建时间</li>
<li>用户表：用户Id(PK), 用户名，邮箱，生日，创建时间，上次登录</li>
<li>关注表：用户Id(PK)，目标用户Id(PK)</li>
<li>点赞表：自增id(PK), 用户Id, 图片Id, 时间</li>
</ul>
<p>数据特点</p>
<ul>
<li>读多写少
<ul>
<li>读写分离，互不影响</li>
</ul>
</li>
<li>不同文件类型
<ul>
<li>图片: 分布式文件系统HDFS</li>
<li>关系: 宽列存储，用户图片列表，用户关注列表 Cassandra</li>
</ul>
</li>
</ul>
<p>架构策略</p>
<ul>
<li>元数据分片
<ul>
<li>按用户Id分，好处同一用户在一起，坏处不均匀，热点问题</li>
<li>按图片Id分，好处哈希均匀，坏处查找单用户内容需要多服务器查询汇总，延时高</li>
<li>按上传时间分，好处方便查最新数据，坏处负载集中</li>
<li>结合图片Id和时间: 时序id，便于排序 √ ？？？</li>
</ul>
</li>
<li>消息流生成
<ul>
<li>实时计算：找关注用户，找每个用户最新n张，汇总排序，延迟高，n可取大值，预备后续结果</li>
<li>预先计算：单独服务器不断计算，在上次结果上补充，允许一定不实时。区分用户访问模式，活跃与否 √</li>
</ul>
</li>
<li>新数据感知
<ul>
<li>拉：关注者主动发请求，才发博主的新数据，实时性低</li>
<li>推：博主发新博，推送给关注者新数据，热门用户发出大量推送，大量关注接收大量推送，数据量大</li>
<li>混合：根据量决定推拉，或者提醒有更新，通知拉取</li>
</ul>
</li>
<li>大量数据
<ul>
<li>图片缓存: CDN</li>
<li>元数据缓存：LRU替换</li>
</ul>
</li>
<li>查看近期
<ul>
<li>缓存最近3天数据，镜像分担负载。缓存结构为每个用户维护链表，新数据头部，删除尾数据</li>
</ul>
</li>
<li>监控
<ul>
<li>发布量</li>
<li>消息流查看量</li>
<li>消息流延迟</li>
</ul>
</li>
</ul>
<p>读扩散：写只写入自身发布列表即可，读需要获取关注人的发布列表，排序汇总</p>
<ul>
<li>写入简单，关注取关简单</li>
<li>feed只存一次</li>
<li>读操作复杂<br>
写扩散：写一条微博，同时写入所有分析的feed列表，读直接读即可</li>
<li>读操作简单，每人读取自己的</li>
<li>每个人额外维护feed列表，同一份冗余存储，消耗空间</li>
<li>关注取关操作复杂</li>
</ul>
<p>微博独有特性</p>
<ul>
<li>转发：只存原博id</li>
<li>热搜标签: 窗口Top N统计</li>
</ul>
<h1 id="视频服务">视频服务</h1>
<hr>
<p>表结构</p>
<ul>
<li>用户表：</li>
<li>视频表：视频id(PK), 标题, 描述，缩略图，用户，点赞数，踩数，播放量</li>
<li>评论表：评论id(PK), 视频id, 评论， 时间</li>
</ul>
<p>架构策略</p>
<ul>
<li>上传
<ul>
<li>断点续传</li>
</ul>
</li>
<li>访问性能
<ul>
<li>热门视频CDN</li>
<li>其他视频缓存</li>
</ul>
</li>
<li>近似视频
<ul>
<li>检测去重</li>
</ul>
</li>
<li>异步队列，上传后进行编码，缩略图生成，存储</li>
</ul>
<p>如何记录观看量，顶踩数<br>
如何实时添加评论</p>
<h1 id="短链接服务">短链接服务</h1>
<hr>
<p>短链接简洁，节省空间，用户友好<br>
还可以为同一链接生成不同短链应用于不同场景，统计分析</p>
<p>业务功能</p>
<ul>
<li>注册短链
<ul>
<li>自定义</li>
<li>被动过期/主动失效/删除</li>
</ul>
</li>
<li>点击短链302重定向原始连接</li>
<li>点击统计
<ul>
<li>来源浏览器</li>
<li>国家</li>
<li>时间</li>
</ul>
</li>
<li>数量约束
<ul>
<li>短链注册量</li>
<li>短链访问量</li>
</ul>
</li>
</ul>
<p>数据特点</p>
<ul>
<li>短链应该不可预测，不同用户注册同一链接结果应该不同
<ul>
<li>在线基于Base64截断，原始链接附加随机数，用户名</li>
<li>离线预先计算很多短链，直接分配即可，即短链和原始没有对应规则</li>
</ul>
</li>
<li>短链数量巨大
<ul>
<li>多实例服务，每个实例预先从未使用表中加载一批到内存中，分配后标记到已使用表，单实例加锁应对多线程</li>
<li>负载均衡，注册时轮流分发即可</li>
</ul>
</li>
<li>读多写少
<ul>
<li>缓存LRU</li>
</ul>
</li>
<li>短链间无关系
<ul>
<li>采取NoSql数据库存储</li>
</ul>
</li>
<li>失效数据清除
<ul>
<li>Lazy. 访问时触发或者单独服务周期扫描</li>
</ul>
</li>
</ul>
<p>架构<br>
高可用，如果服务挂掉，所有链接不可达，主备</p>
<h1 id="爬虫服务">爬虫服务</h1>
<hr>
<p>业务功能</p>
<ul>
<li>种子url扩展</li>
<li>控制
<ul>
<li>robot.txt</li>
</ul>
</li>
</ul>
<p>爬取算法</p>
<ul>
<li>BFS从页面中找链接：整页爬取后再下一个，比DFS不断深入好</li>
<li>从URL中找，尝试同一URL不同路径前缀</li>
</ul>
<p>可扩展性</p>
<p>如何判定新页面<br>
如何处理死循环</p>
<h1 id="消息中间件设计">消息中间件设计</h1>
<hr>
<p>业务功能</p>
<ul>
<li>生产者写入消息</li>
<li>消费者取出消息</li>
<li>监控</li>
</ul>
<p>数据特点</p>
<ul>
<li>持久化：内存/文件</li>
<li>大容量：分布式</li>
<li>不丢失：应答重发</li>
<li>消费模型</li>
</ul>
<p>架构</p>
<ul>
<li>持久化
<ul>
<li>多文件存储</li>
<li>元数据偏移</li>
<li>内存缓冲异步写入</li>
</ul>
</li>
<li>分布式+高可用
<ul>
<li>数据分片</li>
<li>冗余备份</li>
</ul>
</li>
<li>应答重发
<ul>
<li>中间件写入多副本后应答生产者</li>
<li>中间件收到消费者应答后才删除</li>
</ul>
</li>
<li>推拉模型</li>
</ul>
<h1 id="rpc设计">RPC设计</h1>
<hr>
<p>全流程分析</p>
<ul>
<li>动态代理，调用者和提供者实现接口，接口动态代理，底层通信</li>
<li>注册中心的选型与交互</li>
<li>超时、重试、负载均衡</li>
<li>通讯协议</li>
<li>序列化方式</li>
<li>SPI扩展</li>
<li>拦截器、插件等自定义支持</li>
</ul>
<h1 id="定时器设计">定时器设计</h1>
<hr>
<p>线程周期触发</p>
<ul>
<li>任务存储在小顶堆，每次顶部不执行那么里面的也不会执行</li>
<li>环形链表，任务挂载在环形链表上</li>
</ul>
<p>线程保障，别挂掉</p>
<h1 id="积分系统">积分系统</h1>
<hr>
<p>业务功能</p>
<ul>
<li>行为累积积分</li>
<li>累积历史</li>
<li>积分兑换商品</li>
<li>兑换历史</li>
</ul>
<p>数据特点</p>
<ul>
<li>多种行为都能累积积分，变化</li>
<li>仓储为第三方服务，积分扣减后无需等待仓储服务</li>
</ul>
<p>表结构</p>
<ul>
<li>积分表：自增id, 用户id, 积分</li>
<li>积分获取表：自增id, 用户id, 增加积分，来源描述</li>
<li>积分扣减表：自增id, 用户id, 扣减积分，商品id</li>
</ul>
<p>架构</p>
<ul>
<li>消息队列
<ul>
<li>解耦，来源可动态增减</li>
<li>异步，无需等待仓储</li>
<li>可靠消息服务：重试，消费者幂等化处理</li>
</ul>
</li>
</ul>
<h1 id="新api设计">新API设计</h1>
<hr>
<ul>
<li>
<p>API版本</p>
</li>
<li>
<p>业务单一职责</p>
</li>
<li>
<p>域名：是否需要专有子域</p>
</li>
<li>
<p>URL路径设计</p>
</li>
<li>
<p>查询参数</p>
</li>
<li>
<p>请求方式：GET/POST/PUT/DELETE</p>
</li>
<li>
<p>返回数据格式</p>
</li>
<li>
<p>错误返回码</p>
</li>
<li>
<p>安全性: 是否需要https</p>
</li>
<li>
<p>权限</p>
</li>
<li>
<p>跨域 @CrossOrigin</p>
</li>
<li>
<p>限流</p>
</li>
<li>
<p>重试幂等</p>
</li>
<li>
<p>可扩展？</p>
</li>
<li>
<p>高可用？</p>
</li>
</ul>
<h1 id="双十一设计">双十一设计</h1>
<p>双11大促的时候如何设计系统的动态扩容/缩容的机制</p>
<h1 id="操作状态持久化">操作状态持久化</h1>
<hr>
<p>Git  Redis  Kafka类似场景</p>
<ul>
<li>内存，异步刷新磁盘，容忍小部分丢失</li>
<li>定时检查点机制，合并重构日志，减少体积，减少恢复开销</li>
<li>单独节点同步日志进行合并操作，避免影响主节点，结果回传</li>
</ul>
<h1 id="字典表设计">字典表设计</h1>
<hr>
<p>表结构<br>
字典值文字，字典值id, 字典类型，字典描述，状态，删除标记，展示顺序，创建人，创建时间</p>
<h1 id="叫车派单">叫车派单</h1>
<hr>
<p>经纬度位置找附近的车</p>
<ul>
<li>网格划分，2公里方格，寻找同一方格</li>
<li>车定期汇报位置，位于哪个方格，NoSql存储，关系性低频繁更新</li>
<li>选择策略，结合车型，司机评价，空闲时间，在线时间</li>
</ul>
<p>如何存储不断变化的位置</p>
<h1 id="问答服务">问答服务</h1>
<hr>
<p>如何记录答案状态，顶踩数<br>
如何关注<br>
如何展示消息流</p>
<h1 id="云存储">云存储</h1>
<hr>
<p>如何上传/查看/搜索/分享文件<br>
如何管理文件权限<br>
如何协同编辑</p>
<h1 id="即时通讯服务">即时通讯服务</h1>
<hr>
<p>数据库表</p>
<ul>
<li>发送消息表：消息id, 发送方id，接受方id，群id, 消息序号，消息内容，发送时间</li>
<li>接受消息表：消息id, 发送方id，接受方id，群id, 消息序号，消息内容，状态(已推送，未推送)</li>
<li>群信息表：群id, 名称，创建用户，创建时间，群公告</li>
<li>群成员表：群id, 用户id</li>
</ul>
<p>架构</p>
<ul>
<li>接入层：TCP接入(应用直连)，WebSocket接入(网页端)</li>
<li>负载均衡：返回相对空闲的ip</li>
<li>写扩散：发出的消息写入相关用户</li>
<li>消息队列</li>
<li>用户在线判断：缓存维护，记录用户是否在线，连接channel, 上次应答时间</li>
<li>推拉: 在线用户获取连接推送，离线用户上线后自行拉取</li>
<li>消息体采取Protobuf协议</li>
<li>数据库utf8mb4支持emoji字符</li>
<li>文件存储</li>
<li>发送接收表分别按照发送方和接收方水平分表存储</li>
<li>历史数据归档hdfs</li>
</ul>
<p>一个海量在线用户即时通讯系统（IM）的完整设计<br>
<a href="https://msd.misuland.com/pd/2884250103256716572?page=1" target="_blank" rel="noopener">https://msd.misuland.com/pd/2884250103256716572?page=1</a></p>
<h1 id="抢红包">抢红包</h1>
<hr>
<ul>
<li>流量控制：缓存维护红包信息(金额，类型，个数)并带有计数器字段，抢红包请求发现没有红包后立刻返回，只有等于红包个数的请求会进行拆红包</li>
<li>随机算法：保证用户0.01，其他随机</li>
<li>实时随机：内存实时计算拆得红包金额，避免预先分好占用存储资源</li>
<li>入库入账：数据库实时插入拆红包记录，异步写入用户账户</li>
<li>水平扩展：分片，一致性哈希，同一红包的请求由同一台机器对应</li>
</ul>
<h1 id="优惠码分发">优惠码分发</h1>
<hr>
<p>相当于抢金额均等的红包<br>
100万的优惠码，怎样保证每个用户只能领取一个<br>
高并发，并发请求太多，采取队列<br>
缓存维护发放数量，已发放用户</p>
<ul>
<li>如果已发完或者已经发放过，直接返回</li>
<li>如果还有，更新缓存，放入消息队列，后端异步发放</li>
<li>数据库层面唯一键约束保障</li>
</ul>
<h1 id="大数据量视频播放top-n">大数据量视频播放top N</h1>
<hr>
<p>保障绝对精确和实时开销很大</p>
<ul>
<li>分布式计算，中心汇总，比如100台机器，每秒发给中心，中心QPS100</li>
<li>结果缓存，所有查询访问只是查询中心缓存，没有计算</li>
<li>延迟更新，比如最近1小时数据，每分钟更新一次</li>
<li>分片计算，以分钟统计结果为整体，进行滑动窗口</li>
<li>数据采样，数据量下降</li>
</ul>
<h1 id="下载器断点续传">下载器断点续传</h1>
<hr>
<ul>
<li>客户端分片：整个文件分成不同连续区间</li>
<li>多线程下载：每片独立，并行下载</li>
<li>客户端日志：记录每个分片下载位置</li>
<li>客户端数据合并：合并成完整文件</li>
<li>客户端数据清理：受损数据重新下，旧数据清理</li>
<li>文件完整性校验</li>
</ul>
<h1 id="积分过期设计">积分过期设计</h1>
<hr>
<p>滑动窗口，优先消耗老积分</p>
<p>表结构<br>
用户积分表(用户id, 可用积分，更新日期)<br>
积分日志表(自增id, 用户id, 积分，添加时间，过期时间)</p>
<p>方案：</p>
<ul>
<li>每天定时批量计算</li>
<li>单用户每日首次登陆计算</li>
</ul>
<p>计算后又有新消费则无效化，单用户重新计算？？</p>
<h1 id="海量评论抽奖">海量评论抽奖</h1>
<hr>
<p>流式处理？</p>
<p>先随机一次取一个数字，然后收集评论id哈希后等值的部分，然后再随机一次</p>
<h1 id="总结">总结</h1>
<hr>
<p>读多写少 =&gt; 读写分离，缓存，写扩散<br>
流量大 =&gt; 过滤拦截，队列限流<br>
访问量大 =&gt; 多实例服务负载均衡<br>
图片大量访问 =&gt; CDN<br>
复杂稳定 =&gt; 离线计算<br>
容忍不实时，缩短响应时间 =&gt; 队列异步计算<br>
数据量大 =&gt; 分片<br>
数据无关联 =&gt; Nosql<br>
高可用 =&gt; 主备<br>
图片/视频存储 =&gt; 数据库只存地址，文件存文件系统</p>

        
    <div class="donate_module">
        <div id="donate_board" class="donate_bar">
            <br>
            <a id="btn_donate" class="btn_donate" target="_self" href="javascript:;" title="Donate 打赏"></a>
        </div>
        <div id="donate_guide" class="donate_bar hidden">
            <br>
            <a href="/assets/reward/wechat_code.jpg"  class="fancybox">
                <img src="/assets/reward/wechat_code.jpg" title="微信打赏" height="190px" width="auto"/>
            </a>
            <span class="donate_space"></span>
            <a href="/assets/reward/alipay_code.jpg"  class="fancybox">
                <img src="/assets/reward/alipay_code.jpg" title="支付宝打赏" height="190px" width="auto"/>
            </a>
        </div>
        <span class="donate_txt">一分也是爱~</span> 
    </div>

        <div class="breakword">
    <hr>
    <p><strong>版权声明</strong></p>
    <p><img src="/assets/copyright/cc.png" alt=""></p>
    <p><a href="http://linest.github.io/tmp/system-design.html">This site</a> by <a href="mailto:xlinest@gmail.com">Linest</a> is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="external">Creative Commons BY-NC-ND 4.0 International License</a>.
    <br>由<a href="mailto:xlinest@gmail.com">Linest</a>创作并维护的博客采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="external">创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。</p>
    <p>本文永久链接：<a href="http://linest.github.io/tmp/system-design.html">http://linest.github.io/tmp/system-design.html</a></p>
</div>
      
    </div>
    
  </div>
  
    
  
</article>
<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2020 Linest
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> customized by <a href="#">Linest</a> with <span class="octicon octicon-heart" style="color:red"></span>
				</div>
				<div class="hide">
						<a href="https://clustrmaps.com/site/x7rd" title="Visit tracker"><img src="//clustrmaps.com/map_v2.png?cl=ffffff&w=70&t=n&d=trdgmMc8YDC9aFR4WIBOzfE8f6bNwx_Pq7HA9YiG3sA" /></a>
				</div>
    </div>
  </div>
</footer>

    </div>
    

<script>
	var yiliaConfig = {
		fancybox: false,
		animate: true,
		isHome: false,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true
	}
</script>

<!-- Baidu auto push -->
<script>
(function(){
	var bp = document.createElement('script');
	var curProtocol = window.location.protocol.split(':')[0];
	if (curProtocol === 'https') {
		bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	}
	else {
		bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	}
	var s = document.getElementsByTagName("script")[0];
	s.parentNode.insertBefore(bp, s);
})();
</script>

<script src="/js/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>



  </div>
<script>!function(i){var o=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function r(t,e){var n=new Image,i=t.getAttribute("data-original");n.onload=function(){t.src=i,e&&e()},n.src=i}function t(){for(var t=0;t<o.length;t++)e=o[t],void 0,0<=(n=e.getBoundingClientRect()).top&&0<=n.left&&n.top<=(i.innerHeight||document.documentElement.clientHeight)&&r(o[t],function(){o.splice(t,t)});var e,n}t(),i.addEventListener("scroll",t)}(this);</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body>
</html>